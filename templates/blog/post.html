{% extends 'base/base.html' %}
{% load static %}

{% block title %}
    Home
{% endblock %}
{% block css %}
    <link rel="stylesheet" href="{% static 'css/home-style.css' %}">
    <link rel="stylesheet" href="{% static 'css/myColor.css' %}">
{% endblock %}
{% block body %}
    <div class="d-none" id="helper" style="height: 56px"></div>
    <div class="mb-3">{% include 'base/header.html' %}</div>
    <div id="carouselExampleIndicators" class="carousel slide width-md-50 width-70 m-auto mb-3" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="d-block w-100 image-slider-height " src="{% static 'picture/welcome-page.jpg' %}"
                     alt="First slide">
            </div>
            {% for rand_post in rand_post_list %}
                <div class="m-auto carousel-item">
                    <a href="{% url 'post_single_2' rand_post.slug %}"><img
                            class="d-block m-auto w-100 image-slider-height"
                            src="{{ rand_post.image.url }}"
                            alt="Second slide">
                    </a>
                </div>

            {% endfor %}
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <div class="d-none d-md-flex justify-content-center m-2">
        <a href="https://huaweimobilefarsi.com/product/matepad-t8-tablet/?utm_source=Zoomit&amp;utm_medium=Banner&amp;utm_campaign=T8"
           target="_blank" rel="nofollow"><img class="img-responsive Tabligh m-auto"
                                               id="B1-HuaweiMatePadT"
                                               src="https://cdn01.zoomit.ir/2020/12/banner-huawei-970x250-1.gif"
                                               alt="هواوی matepad t بنر"></a>
    </div>
    <div class="row my-container mt-2">
        <div class="col-md-3 d-none d-md-flex p-0 m-0">
            <div class="row h-100 w-100 m-0">
                <div class="col-12 my-container-sm-height my-md-h-2 m-0 p-0  w-100">
                    <div class="mr-md-2 h-100"><a
                            href="https://arazcloud.com/?utm_medium=cpc&amp;utm_source=zoomit&amp;utm_campaign=banner1zoo"
                            target="_blank" rel="nofollow"><img class="img-responsive" id="B2-Araz-Cloud"
                                                                src="https://cdn01.zoomit.ir/2020/11/banner-arazcloud-300x250.gif"
                                                                width="95%" height="98%"
                                                                alt="بنر آٰاز "></a></div>
                </div>
                <div class="col-12 my-container-sm-height my-md-h-2 m-0 p-0  w-100 ">
                    <div class="mb-md-1 mr-2 h-100"><a href="http://yun.ir/uvalmb" target="_blank" rel="nofollow"><img
                            class="img-responsive center-block Tabligh" id="b2-mvmco"
                            src="https://cdn01.zoomit.ir/2020/12/modiral-khodro-banner-300x250.gif" alt=""
                            width="95%" height="95%"
                            data-gtm-vis-first-on-screen-10107254_134="1737"
                            data-gtm-vis-total-visible-time-10107254_134="100" data-gtm-vis-has-fired-10107254_134="1"></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-12 p-0 m-md-0">
            <div class="row w-100 h-100 m-auto default-row-margin-md">
                <div class="col-12  my-container-sm-height  my-md-h-1 p-0 m-0">
                    <div class="img-container my-md-1 ">
                        <img width="98%" height="100%" src="{{ pop_post.1.image.url }}" alt="...">
                        <div class="bottom-right" style=''>{{ pop_post.1.title }}</div>
                    </div>
                </div>
                <div class="col-12 my-container-sm-height my-md-h-3 p-0 m-0">
                    <div class="img-container  my-md-1">
                        <img width="98%" height="100%" src="{{ pop_post.2.image.url }}" alt="...">
                        <div class="bottom-right">{{ pop_post.2.title }}</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-12 p-0 m-0">
            <div class="row h-100 w-100 m-auto default-row-margin-md">
                <div class="col-12 my-container-sm-height my-md-h-3 p-0 m-0">
                    <div class="img-container  mt-md-1">
                        <img width="98%" height="100%" src="{{ pop_post.0.image.url }}" alt="...">
                        <div class="bottom-right">{{ pop_post.0.title }}</div>
                    </div>
                </div>
                <div class="col-12 col-md-6 my-container-sm-height my-md-h-1  p-0 m-0">
                    <div class="img-container">
                        <img width="98%" height="100%" src="{{ pop_post.0.image.url }}" alt="...">
                        <div class="bottom-right">{{ pop_post.0.title }}</div>
                    </div>
                </div>
                <div class="col-12 col-md-6 my-container-sm-height my-md-h-1 p-0 m-0">
                    <div class="img-container">
                        <img width="98%" height="100%" src="{{ pop_post.0.image.url }}" alt="...">
                        <div class="bottom-right">{{ pop_post.0.title }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-center m-2">
        <img class="img-responsive center-block Tabligh" id="B7-Honor2"
             style="width: 70%;"
             src="https://cdn01.zoomit.ir/2020/12/banner-honor-9a-1300x100.gif"
             data-gtm-vis-recent-on-screen-10107254_134="986" data-gtm-vis-first-on-screen-10107254_134="986"
             data-gtm-vis-total-visible-time-10107254_134="100" data-gtm-vis-has-fired-10107254_134="1">

    </div>
    <div class="my-home-container dir-rtl">
        <div class="row justify-content-center m-md-3 m-1" style="width: inherit">
            <div class="d-none d-md-flex col-md-3 flex-column">
                <div class="card mb-2 mt-1 w-100 border-0">
                    <a style="width: 90%" class="mx-auto" href="https://www.sarvcrm.com/career/" target="_blank"
                       rel="nofollow">
                        <img href="" class="card-img-top my-2 mx-auto" id="B4-Hamkaran"
                             src="https://cdn01.zoomit.ir/2020/12/banner-sarv-250x250.gif" alt="...">
                    </a>
                </div>

                {% for daily_post in pop_daily_post %}
                    <div class="card mb-2 mt-1 w-100">
                        <img class="card-img-top my-2 mx-auto" style="width: 90%;" src="{{ daily_post.image.url }}"
                             alt="Card image cap">
                        <div class="card-body">
                            <p class="card-text">{{ daily_post.summary }}</p>
                        </div>
                    </div>
                {% endfor %}

            </div>
            <div class="container dir-rtl col-12 col-md-9 col-lg-6">
                {% for post in post_list %}
                    <div class="row border m-1">
                        <div class="col-4">
                            <div class="p-2 m-2">
                                <img alt="post image" width="100%" src="{{ post.image.url }}">
                            </div>
                        </div>
                        <div class="col-8">
                            <span class="text-light-color">{{ post.create_at }}</span>
                            {% if post.post_setting.author %}
                                <span class="text-light-color"> || {{ post.author.first_name }}</span>
                            {% endif %}
                            <div class="p-2 m-2">
                                <a href="{% url 'post_single_2' post.slug %}">{{ post.title }}</a><br>
                                <p style="font-family: 'Markazi Text', serif;">{{ post.summary }}</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="d-none d-lg-flex col-lg-3">
                <div class="d-none d-md-flex col-md-3 flex-column">
                    <div class="card mb-2 mt-1 w-100 border-0">
                        <a style="width: 80%" class="m-auto" href="https://zaya.io/zaesu" target="_blank"
                           rel="nofollow">
                            <img class="img-responsive Tabligh border"
                                 id="B3-AppleOne2"
                                 src="https://cdn01.zoomit.ir/2020/12/banner-appleone-300x250-1.gif"
                                 alt="اپل وان کمپین زمستان">
                        </a>
                    </div>
                    <div class="card mb-2 mt-1 w-100 border-0">
                        <a style="width: 80%" class="m-auto" href="https://zaya.io/zaesu" target="_blank"
                           rel="nofollow">
                            <img class="img-responsive center-block Tabligh border" id="B3-Coinnik"
                                 src="https://cdn01.zoomit.ir/2020/12/banner-coinnik-300x250-1.gif">
                        </a>
                    </div>
                    <div class="card mb-2 mt-1 w-100 border-0">
                        <a style="width: 80%" class="m-auto" href="https://zaya.io/zaesu" target="_blank"
                           rel="nofollow">
                            <img class="img-responsive center-block Tabligh border" id="B3-ExirtelYalda"
                                 src="https://cdn01.zoomit.ir/2020/12/banner-exirtel-300x250.gif">
                        </a>
                    </div>
                    <div class="card mb-2 mt-1 w-100 border-0">
                        <a style="width: 80%" class="m-auto" href="https://zaya.io/zaesu" target="_blank"
                           rel="nofollow">
                            <img class="img-responsive center-block Tabligh border" id="B3-iCan"
                                 src="https://cdn01.zoomit.ir/2020/12/banner-ican-300x250-2.gif">
                        </a>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="pagination m-auto">
        <div class="m-auto" id="paginator-container">
            <span class="d-none" id="current_page">{{ page_obj.number }}</span>
            <span class="d-none" id="last_page_num">{{ page_obj.paginator.num_pages }}</span>
            <div class="d-inline-block" id="paginator-container-1">
                <a id="first" href="">first</a>
            </div>
            <div class="d-inline-block" id="paginator-container-2">
                <a id="second" href="">previous</a>
            </div>
            <div class="d-inline-block" id="paginator-container-3">
                <a id="third" href="">next</a>
            </div>
            <div class="d-inline-block" id="paginator-container-4">
                <a id="fourth" href="">last</a>
            </div>
            <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>
        </div>
    </div>
    <div>{% include 'base/footer.html' %}</div>

{% endblock %}
{% block javascript %}
    <script>
        let current = $('#current_page')
        const current_num = parseInt(current.text())
        const last_page_num = parseInt($('#last_page_num').text())
        const first_a = $('#first')
        const second_a = $('#second')
        const third_a = $('#third')
        const fourth_a = $('#fourth')
        if (current_num === 1) {
            let paginator_container = $('#paginator-container-1')
            paginator_container.prepend(`<a>1</a>`)
            first_a.attr('href', `?page=2`)
            first_a.text(2)
            second_a.attr('href', `?page=3`)
            second_a.text(3)
            third_a.attr('href', `?page=4`)
            third_a.text(4)
            fourth_a.attr('href', `?page=5`)
            fourth_a.text(5)
        } else if (current_num === 2) {
            let paginator_container = $('#paginator-container-2')
            paginator_container.prepend(`<a>2</a>`)
            first_a.text(1)
            second_a.text(3)
            third_a.text(4)
            fourth_a.text(5)

            first_a.attr('href', `?page=1`)
            second_a.attr('href', `?page=3`)
            third_a.attr('href', `?page=4`)
            fourth_a.attr('href', `?page=5`)

        } else if (current_num === last_page_num) {
            first_a.text(last_page_num-4)
            second_a.text(last_page_num-3)
            third_a.text(last_page_num-2)
            fourth_a.text(last_page_num-1)
            let paginator_container = $('#paginator-container-4')
            paginator_container.append(`<a>${last_page_num}</a>`)
            first_a.attr('href', `?page=${last_page_num - 4}`)
            second_a.attr('href', `?page=${last_page_num - 3}`)
            third_a.attr('href', `?page=${last_page_num - 2}`)
            fourth_a.attr('href', `?page=${last_page_num - 1}`)
        } else if (current_num === last_page_num - 1) {
            first_a.text(last_page_num-4)
            second_a.text(last_page_num-3)
            third_a.text(last_page_num-2)
            fourth_a.text(last_page_num)
            let paginator_container = $('#paginator-container-3')
            paginator_container.append(`<a>${last_page_num - 1}</a>`)
            first_a.attr('href', `?page${last_page_num - 4}`)
            second_a.attr('href', `?page=${last_page_num - 3}`)
            third_a.attr('href', `?page=${last_page_num - 2}`)
            fourth_a.attr('href', `?page=${last_page_num}`)
        } else {
            let paginator_container = $('#paginator-container-3')
            first_a.text(current_num-2)
            second_a.text(current_num-1)
            third_a.text(current_num+1)
            fourth_a.text(current_num+2)
            paginator_container.prepend(`<a>${current_num}</a>`)
            first_a.attr('href', `?page=${current_num - 2}`)
            second_a.attr('href', `?page=${current_num - 1}`)
            third_a.attr('href', `?page=${current_num + 1}`)
            fourth_a.attr('href', `?page=${current_num + 2}`)
        }

    </script>
{% endblock %}


